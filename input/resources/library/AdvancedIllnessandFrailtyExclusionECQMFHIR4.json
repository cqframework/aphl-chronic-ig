{
  "resourceType": "Library",
  "id": "AdvancedIllnessandFrailtyExclusionECQMFHIR4",
  "meta": {
    "profile": [ "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-library-cqfm" ]
  },
  "language": "en",
  "contained": [ {
    "resourceType": "Parameters",
    "id": "options",
    "parameter": [ {
      "name": "translatorVersion",
      "valueString": "3.11.0"
    }, {
      "name": "option",
      "valueString": "EnableLocators"
    }, {
      "name": "option",
      "valueString": "DisableListDemotion"
    }, {
      "name": "option",
      "valueString": "DisableListPromotion"
    }, {
      "name": "format",
      "valueString": "XML"
    }, {
      "name": "format",
      "valueString": "JSON"
    }, {
      "name": "analyzeDataRequirements",
      "valueBoolean": false
    }, {
      "name": "collapseDataRequirements",
      "valueBoolean": true
    }, {
      "name": "compatibilityLevel",
      "valueString": "1.5"
    }, {
      "name": "enableCqlOnly",
      "valueBoolean": false
    }, {
      "name": "errorLevel",
      "valueString": "Info"
    }, {
      "name": "signatureLevel",
      "valueString": "None"
    }, {
      "name": "validateUnits",
      "valueBoolean": true
    }, {
      "name": "verifyOnly",
      "valueBoolean": false
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions",
    "valueReference": {
      "reference": "#options"
    }
  } ],
  "url": "http://fhir.org/guides/cqf/aphl/chronic-ds/Library/AdvancedIllnessandFrailtyExclusionECQMFHIR4",
  "version": "5.12.000",
  "name": "AdvancedIllnessandFrailtyExclusionECQMFHIR4",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "date": "2021-01-08T13:45:35+00:00",
  "publisher": "National Committee for Quality Assurance",
  "description": "Frailty Exclusion",
  "relatedArtifact": [ {
    "type": "depends-on",
    "display": "FHIR model information",
    "resource": "http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1"
  }, {
    "type": "depends-on",
    "display": "Library FHIRHelpers",
    "resource": "http://fhir.org/guides/cqf/aphl/chronic-ds/Library/FHIRHelpers|4.1.000"
  }, {
    "type": "depends-on",
    "display": "Library Global",
    "resource": "http://fhir.org/guides/cqf/aphl/chronic-ds/Library/MATGlobalCommonFunctionsFHIR4|6.0.000"
  }, {
    "type": "depends-on",
    "display": "Library FC",
    "resource": "http://fhir.org/guides/cqf/aphl/chronic-ds/Library/FHIRCommon|1.1.000"
  }, {
    "type": "depends-on",
    "display": "Library AC",
    "resource": "http://fhir.org/guides/cqf/aphl/chronic-ds/Library/AlphoraCommon"
  }, {
    "type": "depends-on",
    "display": "Code system LOINC",
    "resource": "http://loinc.org"
  }, {
    "type": "depends-on",
    "display": "Code system SNOMEDCT",
    "resource": "http://snomed.info/sct"
  }, {
    "type": "depends-on",
    "display": "Code system ConditionClinicalStatusCodes",
    "resource": "http://terminology.hl7.org/CodeSystem/condition-clinical"
  }, {
    "type": "depends-on",
    "display": "Code system ConditionVerificationStatusCodes",
    "resource": "http://terminology.hl7.org/CodeSystem/condition-ver-status"
  }, {
    "type": "depends-on",
    "display": "Value set Acute Inpatient",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1083"
  }, {
    "type": "depends-on",
    "display": "Value set Advanced Illness",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.110.12.1082"
  }, {
    "type": "depends-on",
    "display": "Value set Care Services in Long-Term Residential Facility",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1014"
  }, {
    "type": "depends-on",
    "display": "Value set Dementia Medications",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1510"
  }, {
    "type": "depends-on",
    "display": "Value set Emergency Department Visit",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1010"
  }, {
    "type": "depends-on",
    "display": "Value set Frailty Device",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.118.12.1300"
  }, {
    "type": "depends-on",
    "display": "Value set Frailty Diagnosis",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1074"
  }, {
    "type": "depends-on",
    "display": "Value set Frailty Encounter",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1088"
  }, {
    "type": "depends-on",
    "display": "Value set Frailty Symptom",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1075"
  }, {
    "type": "depends-on",
    "display": "Value set Nonacute Inpatient",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1084"
  }, {
    "type": "depends-on",
    "display": "Value set Nursing Facility Visit",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1012"
  }, {
    "type": "depends-on",
    "display": "Value set Observation",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1086"
  }, {
    "type": "depends-on",
    "display": "Value set Outpatient",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1087"
  } ],
  "parameter": [ {
    "name": "Measurement Period",
    "use": "in",
    "min": 0,
    "max": "1",
    "type": "Period"
  }, {
    "name": "Patient",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Patient"
  }, {
    "name": "Up To One Year Prior Including Measurement Period",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Period"
  }, {
    "name": "Has Criteria Indicating Frailty",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Outpatient Encounters With Advanced Illness",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  }, {
    "name": "Has Two Outpatient Encounters With Advanced Illness on Different Dates of Service",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  }, {
    "name": "Has Inpatient Encounter With Advanced Illness",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  }, {
    "name": "Has Dementia Medications In Year Before or During Measurement Period",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "MedicationRequest"
  }, {
    "name": "Is Age 66 or Older with Advanced Illness and Frailty",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Is Age 66 to 80 with Advanced Illness and Frailty or Is Age 81 or Older with Frailty",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Lives In A Nursing Home",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Is Age 66 or Older Living Long Term in a Nursing Home",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  } ],
  "dataRequirement": [ {
    "type": "Patient",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Patient" ]
  }, {
    "type": "DeviceRequest",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/DeviceRequest" ],
    "mustSupport": [ "code", "status", "intent", "authoredOn" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.118.12.1300"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
    "mustSupport": [ "code", "value", "effective", "status" ],
    "codeFilter": [ {
      "path": "code",
      "code": [ {
        "system": "http://loinc.org",
        "code": "98181-1",
        "display": "Medical equipment used"
      } ]
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
    "mustSupport": [ "code", "effective", "status" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1075"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
    "mustSupport": [ "code", "effective", "value", "status" ],
    "codeFilter": [ {
      "path": "code",
      "code": [ {
        "system": "http://loinc.org",
        "code": "71802-3",
        "display": "Housing status"
      } ]
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
    "mustSupport": [ "code", "clinicalStatus", "verificationStatus" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1074"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
    "mustSupport": [ "code", "clinicalStatus", "verificationStatus" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.110.12.1082"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
    "mustSupport": [ "type", "period", "status" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1088"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
    "mustSupport": [ "type", "status", "period" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1087"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
    "mustSupport": [ "type", "status", "period" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1086"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
    "mustSupport": [ "type", "status", "period" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1010"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
    "mustSupport": [ "type", "status", "period" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1084"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
    "mustSupport": [ "type", "period", "status" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1083"
    } ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/MedicationRequest" ],
    "mustSupport": [ "medication", "status", "doNotPerform", "intent", "dosageInstruction" ],
    "codeFilter": [ {
      "path": "medication",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1510"
    } ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/MedicationRequest" ],
    "mustSupport": [ "medication.reference", "status", "doNotPerform", "intent", "dosageInstruction" ]
  }, {
    "type": "Medication",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Medication" ],
    "mustSupport": [ "id" ]
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBBZHZhbmNlZElsbG5lc3NhbmRGcmFpbHR5RXhjbHVzaW9uRUNRTUZISVI0IHZlcnNpb24gJzUuMTIuMDAwJw0KDQp1c2luZyBGSElSIHZlcnNpb24gJzQuMC4xJw0KDQppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMS4wMDAnIGNhbGxlZCBGSElSSGVscGVycw0KaW5jbHVkZSBNQVRHbG9iYWxDb21tb25GdW5jdGlvbnNGSElSNCB2ZXJzaW9uICc2LjAuMDAwJyBjYWxsZWQgR2xvYmFsDQppbmNsdWRlIEZISVJDb21tb24gdmVyc2lvbiAnMS4xLjAwMCcgY2FsbGVkIEZDIA0KaW5jbHVkZSBBbHBob3JhQ29tbW9uIGNhbGxlZCBBQw0KDQpjb2Rlc3lzdGVtICJMT0lOQyI6ICdodHRwOi8vbG9pbmMub3JnJw0KY29kZXN5c3RlbSAiU05PTUVEQ1QiOiAnaHR0cDovL3Nub21lZC5pbmZvL3NjdCcgDQoNCnZhbHVlc2V0ICJBY3V0ZSBJbnBhdGllbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwODMnIA0KdmFsdWVzZXQgIkFkdmFuY2VkIElsbG5lc3MiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTEwLjEyLjEwODInIA0KdmFsdWVzZXQgIkNhcmUgU2VydmljZXMgaW4gTG9uZy1UZXJtIFJlc2lkZW50aWFsIEZhY2lsaXR5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjEwMS4xMi4xMDE0JyANCnZhbHVlc2V0ICJEZW1lbnRpYSBNZWRpY2F0aW9ucyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy40NjQuMTAwMy4xOTYuMTIuMTUxMCcgDQp2YWx1ZXNldCAiRW1lcmdlbmN5IERlcGFydG1lbnQgVmlzaXQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwMTAnIA0KdmFsdWVzZXQgIkVtZXJnZW5jeSBEZXBhcnRtZW50IEV2YWx1YXRpb24gYW5kIE1hbmFnZW1lbnQgVmlzaXQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwMTAnDQp2YWx1ZXNldCAiRnJhaWx0eSBEZXZpY2UiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTE4LjEyLjEzMDAnIA0KdmFsdWVzZXQgIkZyYWlsdHkgRGlhZ25vc2lzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjExMy4xMi4xMDc0JyANCnZhbHVlc2V0ICJGcmFpbHR5IEVuY291bnRlciI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy40NjQuMTAwMy4xMDEuMTIuMTA4OCcgDQp2YWx1ZXNldCAiRnJhaWx0eSBTeW1wdG9tIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjExMy4xMi4xMDc1JyANCnZhbHVlc2V0ICJOb25hY3V0ZSBJbnBhdGllbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwODQnIA0KdmFsdWVzZXQgIk51cnNpbmcgRmFjaWxpdHkgVmlzaXQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwMTInIA0KdmFsdWVzZXQgIk9ic2VydmF0aW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjEwMS4xMi4xMDg2JyANCnZhbHVlc2V0ICJPdXRwYXRpZW50IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjEwMS4xMi4xMDg3JyANCg0KY29kZSAiSG91c2luZyBTdGF0dXMiOiAnNzE4MDItMycgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ0hvdXNpbmcgc3RhdHVzJw0KY29kZSAiTGl2ZXMgSW4gQSBOdXJzaW5nIEhvbWUgKGZpbmRpbmcpIjogJzE2MDczNDAwMCcgZnJvbSAiU05PTUVEQ1QiIGRpc3BsYXkgJ0xpdmVzIGluIGEgbnVyc2luZyBob21lIChmaW5kaW5nKScNCmNvZGUgIk1lZGljYWwgRXF1aXBtZW50IFVzZWQiOiAnOTgxODEtMScgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ01lZGljYWwgZXF1aXBtZW50IHVzZWQnDQoNCnBhcmFtZXRlciAiTWVhc3VyZW1lbnQgUGVyaW9kIiBkZWZhdWx0IEludGVydmFsW0AyMDI1LTAxLTAxVDAwOjAwOjAwLjAsIEAyMDI2LTAxLTAxVDAwOjAwOjAwLjApDQoNCmNvbnRleHQgUGF0aWVudA0KDQpkZWZpbmUgIlVwIFRvIE9uZSBZZWFyIFByaW9yIEluY2x1ZGluZyBNZWFzdXJlbWVudCBQZXJpb2QiOg0KICBJbnRlcnZhbFtzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIiAtIDEgeWVhciwgZW5kIG9mICJNZWFzdXJlbWVudCBQZXJpb2QiXQ0KDQpkZWZpbmUgIklzIEFnZSA2NiBvciBPbGRlciB3aXRoIEFkdmFuY2VkIElsbG5lc3MgYW5kIEZyYWlsdHkiOg0KICBBZ2VJblllYXJzQXQoZGF0ZSBmcm9tIGVuZCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIikgPj0gNjYNCiAgICBhbmQgIkhhcyBDcml0ZXJpYSBJbmRpY2F0aW5nIEZyYWlsdHkiDQogICAgYW5kICgNCiAgICAgIGV4aXN0cygiSGFzIFR3byBPdXRwYXRpZW50IEVuY291bnRlcnMgV2l0aCBBZHZhbmNlZCBJbGxuZXNzIG9uIERpZmZlcmVudCBEYXRlcyBvZiBTZXJ2aWNlIikNCiAgICAgIG9yIGV4aXN0cygiSGFzIElucGF0aWVudCBFbmNvdW50ZXIgV2l0aCBBZHZhbmNlZCBJbGxuZXNzIikNCiAgICAgICAgb3IgZXhpc3RzKCJIYXMgRGVtZW50aWEgTWVkaWNhdGlvbnMgSW4gWWVhciBCZWZvcmUgb3IgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCIpDQogICAgKQ0KDQpkZWZpbmUgIklzIEFnZSA2NiB0byA4MCB3aXRoIEFkdmFuY2VkIElsbG5lc3MgYW5kIEZyYWlsdHkgb3IgSXMgQWdlIDgxIG9yIE9sZGVyIHdpdGggRnJhaWx0eSI6DQogICgNCiAgICBBZ2VJblllYXJzQXQoZGF0ZSBmcm9tIGVuZCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIikgaW4gSW50ZXJ2YWxbNjYsIDgwXQ0KICAgICAgYW5kICJIYXMgQ3JpdGVyaWEgSW5kaWNhdGluZyBGcmFpbHR5Ig0KICAgICAgYW5kICgNCiAgICAgICAgZXhpc3RzKCJIYXMgVHdvIE91dHBhdGllbnQgRW5jb3VudGVycyBXaXRoIEFkdmFuY2VkIElsbG5lc3Mgb24gRGlmZmVyZW50IERhdGVzIG9mIFNlcnZpY2UiKQ0KICAgICAgICBvciBleGlzdHMoIkhhcyBJbnBhdGllbnQgRW5jb3VudGVyIFdpdGggQWR2YW5jZWQgSWxsbmVzcyIpDQogICAgICAgIG9yIGV4aXN0cygiSGFzIERlbWVudGlhIE1lZGljYXRpb25zIEluIFllYXIgQmVmb3JlIG9yIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiKQ0KICAgICAgKQ0KICApIA0KICBvciAoDQogICAgQWdlSW5ZZWFyc0F0KGRhdGUgZnJvbSBlbmQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIpID49IDgxDQogICAgICBhbmQgIkhhcyBDcml0ZXJpYSBJbmRpY2F0aW5nIEZyYWlsdHkiDQogICkNCg0KZGVmaW5lICJJcyBBZ2UgNjYgb3IgT2xkZXIgTGl2aW5nIExvbmcgVGVybSBpbiBhIE51cnNpbmcgSG9tZSI6DQogIEFnZUluWWVhcnNBdChkYXRlIGZyb20gZW5kIG9mICJNZWFzdXJlbWVudCBQZXJpb2QiKSA+PSA2Ng0KICAgIGFuZCAiTGl2ZXMgSW4gQSBOdXJzaW5nIEhvbWUiDQoNCmRlZmluZSAiSGFzIENyaXRlcmlhIEluZGljYXRpbmcgRnJhaWx0eSI6DQogIGV4aXN0cygNCiAgICAoQUMuUXVhbGlmaWVkRGV2aWNlUmVxdWVzdHMoW0RldmljZVJlcXVlc3Q6ICJGcmFpbHR5IERldmljZSJdKSkgRnJhaWx0eURldmljZU9yZGVyDQogICAgICB3aGVyZSBGcmFpbHR5RGV2aWNlT3JkZXIuYXV0aG9yZWRPbiBkdXJpbmcgZGF5IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiDQogICAgKSANCiAgICBvciBleGlzdHMoDQogICAgICAgIChBQy5RdWFsaWZpZWRPYnNlcnZhdGlvbnMoW09ic2VydmF0aW9uOiAiTWVkaWNhbCBFcXVpcG1lbnQgVXNlZCJdKSkgRXF1aXBtZW50VXNlZA0KICAgICAgICAgIHdoZXJlIEVxdWlwbWVudFVzZWQudmFsdWUgaW4gIkZyYWlsdHkgRGV2aWNlIg0KICAgICAgICAgICAgYW5kIEZDLlRvSW50ZXJ2YWwoRXF1aXBtZW50VXNlZC5lZmZlY3RpdmUpIGVuZHMgZHVyaW5nIGRheSBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIg0KICAgICkNCiAgICBvciBleGlzdHMoDQogICAgICAoQUMuUXVhbGlmaWVkQ29uZGl0aW9ucyhbQ29uZGl0aW9uOiAiRnJhaWx0eSBEaWFnbm9zaXMiXSkpIEZyYWlsdHlEaWFnbm9zaXMNCiAgICAgICAgd2hlcmUgRkMuVG9QcmV2YWxlbmNlSW50ZXJ2YWwoRnJhaWx0eURpYWdub3Npcykgb3ZlcmxhcHMgIk1lYXN1cmVtZW50IFBlcmlvZCINCiAgICApDQogICAgb3IgZXhpc3RzKA0KICAgICAgKEFDLlF1YWxpZmllZEVuY291bnRlcnMoW0VuY291bnRlcjogIkZyYWlsdHkgRW5jb3VudGVyIl0pKSBGcmFpbHR5RW5jDQogICAgICAgIHdoZXJlIEZDLlRvSW50ZXJ2YWwoRnJhaWx0eUVuYy5wZXJpb2QpIG92ZXJsYXBzICJNZWFzdXJlbWVudCBQZXJpb2QiDQogICAgKQ0KICAgIG9yIGV4aXN0cygNCiAgICAgIChBQy5RdWFsaWZpZWRPYnNlcnZhdGlvbnMoW09ic2VydmF0aW9uOiAiRnJhaWx0eSBTeW1wdG9tIl0pKSBGcmFpbHR5U3ltcHRvbQ0KICAgICAgICB3aGVyZSBGQy5Ub0ludGVydmFsKEZyYWlsdHlTeW1wdG9tLmVmZmVjdGl2ZSkgb3ZlcmxhcHMgIk1lYXN1cmVtZW50IFBlcmlvZCINCiAgICApDQoNCmRlZmluZSAiSGFzIElucGF0aWVudCBFbmNvdW50ZXIgV2l0aCBBZHZhbmNlZCBJbGxuZXNzIjogIA0KICAoQUMuUXVhbGlmaWVkRW5jb3VudGVycyhbRW5jb3VudGVyOiAiQWN1dGUgSW5wYXRpZW50Il0pKSBJbnBhdGllbnRFbmMNCiAgICB3aXRoIChBQy5RdWFsaWZpZWRDb25kaXRpb25zKFtDb25kaXRpb246ICJBZHZhbmNlZCBJbGxuZXNzIl0pKSBBZHZhbklsbA0KICAgICAgc3VjaCB0aGF0IEZDLlRvUHJldmFsZW5jZUludGVydmFsKEFkdmFuSWxsKSBvdmVybGFwcyBJbnBhdGllbnRFbmMucGVyaW9kDQogICAgICAgIGFuZCBGQy5Ub0ludGVydmFsKElucGF0aWVudEVuYy5wZXJpb2QpIG92ZXJsYXBzICJVcCBUbyBPbmUgWWVhciBQcmlvciBJbmNsdWRpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIg0KDQpkZWZpbmUgIk91dHBhdGllbnQgRW5jb3VudGVycyBXaXRoIEFkdmFuY2VkIElsbG5lc3MiOg0KICAoKEFDLlF1YWxpZmllZEVuY291bnRlcnMoW0VuY291bnRlcjogIk91dHBhdGllbnQiXSkpDQogICAgdW5pb24gKEFDLlF1YWxpZmllZEVuY291bnRlcnMoW0VuY291bnRlcjogIk9ic2VydmF0aW9uIl0pKQ0KICAgIHVuaW9uIChBQy5RdWFsaWZpZWRFbmNvdW50ZXJzKFtFbmNvdW50ZXI6ICJFbWVyZ2VuY3kgRGVwYXJ0bWVudCBWaXNpdCJdKSkNCiAgICB1bmlvbiAoQUMuUXVhbGlmaWVkRW5jb3VudGVycyhbRW5jb3VudGVyOiAiTm9uYWN1dGUgSW5wYXRpZW50Il0pKSkgT3V0cGF0aWVudEVuYw0KICAgICAgd2l0aCAoQUMuUXVhbGlmaWVkQ29uZGl0aW9ucyhbQ29uZGl0aW9uOiAiQWR2YW5jZWQgSWxsbmVzcyJdKSkgQWR2YW5JbGwNCiAgICAgICAgc3VjaCB0aGF0IEZDLlRvUHJldmFsZW5jZUludGVydmFsKEFkdmFuSWxsKSBvdmVybGFwcyAiTWVhc3VyZW1lbnQgUGVyaW9kIg0KICAgICAgYW5kIEZDLlRvSW50ZXJ2YWwoT3V0cGF0aWVudEVuYy5wZXJpb2QpIG92ZXJsYXBzICJVcCBUbyBPbmUgWWVhciBQcmlvciBJbmNsdWRpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIiANCg0KZGVmaW5lICJIYXMgVHdvIE91dHBhdGllbnQgRW5jb3VudGVycyBXaXRoIEFkdmFuY2VkIElsbG5lc3Mgb24gRGlmZmVyZW50IERhdGVzIG9mIFNlcnZpY2UiOg0KICBmcm9tDQogICAgIk91dHBhdGllbnQgRW5jb3VudGVycyBXaXRoIEFkdmFuY2VkIElsbG5lc3MiIE91dHBhdGllbnRFbmNvdW50ZXIxLA0KICAgICJPdXRwYXRpZW50IEVuY291bnRlcnMgV2l0aCBBZHZhbmNlZCBJbGxuZXNzIiBPdXRwYXRpZW50RW5jb3VudGVyMg0KICB3aGVyZSBPdXRwYXRpZW50RW5jb3VudGVyMi5wZXJpb2QgZW5kcyAxIGRheSBvciBtb3JlIGFmdGVyIGRheSBvZiBlbmQgb2YgT3V0cGF0aWVudEVuY291bnRlcjEucGVyaW9kDQogIHJldHVybiBPdXRwYXRpZW50RW5jb3VudGVyMSAgICANCg0KZGVmaW5lICJIYXMgRGVtZW50aWEgTWVkaWNhdGlvbnMgSW4gWWVhciBCZWZvcmUgb3IgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCI6DQogIChBQy5RdWFsaWZpZWRNZWRpY2F0aW9uUmVxdWVzdHMoW01lZGljYXRpb25SZXF1ZXN0OiAiRGVtZW50aWEgTWVkaWNhdGlvbnMiXSkpIERlbWVudGlhTWVkDQogICAgd2hlcmUgZXhpc3RzKA0KICAgICAgRGVtZW50aWFNZWQuZG9zYWdlSW5zdHJ1Y3Rpb24gZG9zYWdlDQogICAgICB3aGVyZSBleGlzdHMoDQogICAgICAgIEZDLlRvVGltaW5nSW50ZXJ2YWwoZG9zYWdlLnRpbWluZykpIHRpbWluZw0KICAgICAgICB3aGVyZSB0aW1pbmcgb3ZlcmxhcHMgIlVwIFRvIE9uZSBZZWFyIFByaW9yIEluY2x1ZGluZyBNZWFzdXJlbWVudCBQZXJpb2QiKQ0KDQpkZWZpbmUgIkxpdmVzIEluIEEgTnVyc2luZyBIb21lIjoNCiAgTGFzdCgNCiAgICAoQUMuUXVhbGlmaWVkT2JzZXJ2YXRpb25zKFtPYnNlcnZhdGlvbjogIkhvdXNpbmcgU3RhdHVzIl0pKSBIb3VzaW5nU3RhdHVzDQogICAgICB3aGVyZSBGQy5Ub0ludGVydmFsKEhvdXNpbmdTdGF0dXMuZWZmZWN0aXZlKSBlbmRzIG9uIG9yIGJlZm9yZSBlbmQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCINCiAgICAgICAgYW5kIEhvdXNpbmdTdGF0dXMudmFsdWUgfiBUb0NvbmNlcHQoIkxpdmVzIEluIEEgTnVyc2luZyBIb21lIChmaW5kaW5nKSIpDQogICAgc29ydCBieSBpc3N1ZWQgYXNjZW5kaW5nDQogICkgaXMgbm90IG51bGwNCg0KDQo=",
    "url": "http://fhir.org/guides/cqf/aphl/chronic-ds/Library-AdvancedIllnessandFrailtyExclusionECQMFHIR4.cql"
  } ]
}